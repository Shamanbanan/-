<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-firestore.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/docxtemplater/3.39.1/docxtemplater.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-database.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.2/FileSaver.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js"></script>
<link rel="stylesheet" href="style.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

<title>Заявка на закупку номенклатур</title>
</head>
<body>
<!-- ШАПКА -->
<header class="header-container">
  <!-- <textarea id="nameList" rows="5" cols="30" placeholder="Введите список наименований через запятую"></textarea>
<button id="searchButton">Поиск</button> -->

  <button id="view-requests">Посмотреть ТМЦ</button>
  <div id="login-form"class="hidden">
    <span class="close-btn-login">&times;</span>
      <h2>Форма авторизации</h2>
      <form>
          <input type="email" id="email" placeholder="Email" required>
          <input type="password" id="password" placeholder="Пароль" required>
          <button type="submit">Войти</button>
      </form>
      <span>Если вам на почту не пришел Email и пароль просьба обратиться на почту: shimanskij.a@e-1.ru или звонить по телефону: 79280358732 </span>
  </div>
  <div id="logged-in-content" class="hidden">
    <div class="filter-content">
    <input type="checkbox" id="filterCheckbox" checked />
<label for="filterCheckbox">Фильтровать заявки по моим данным</label>
</div>
      <h2 id="welcome-message"></h2>
      <button id="logout-btn">Выйти</button>
  </div>
</header>
<!-- ТАБЛИЦА РАСКРЫТЫХ ЗАЯВОК-->
<div class="main">
<div id="products-table-container" style="display: none;">
  <table id="products-table">
    <thead>
      <tr class="head-string filter-row">
        <th>№ заявки
          <i class="toggle-filter-button fa fa-filter"></i>
          <div class="filter-dropdown">
            <input type="number"  data-filter="0" min="0" size="6" placeholder="Фильтр">
          </div>
        </th>
        <th>ФИО инициатор
          <i class="toggle-filter-button fa fa-filter"></i>
          <div class="filter-dropdown">
          <input type="text"  data-filter="1" placeholder="Фильтр">
          </div>
        </th>
        <th>Ответственный</th>
        <th>Дата заявки</th>
        <th>Наименование
          <i class="toggle-filter-button fa fa-filter"></i>
          <div class="filter-dropdown">
          <input type="text"  data-filter="4" placeholder="Фильтр">
          </div>
        </th>
        <th>Вариант исп.</th>
        <th>Оборудование
          <i class="toggle-filter-button fa fa-filter"></i>
          <div class="filter-dropdown">
          <input type="text"  data-filter="6" placeholder="Фильтр">
          </div>
        </th>
        <th>Баз.ед.</th>
        <th>Поставщик</th>
        <th>Комментарий</th>
        <th>Код
          <i class="toggle-filter-button fa fa-filter"></i>
          <div class="filter-dropdown">
          <input type="text"  data-filter="7" placeholder="Фильтр">
          </div>
        </th>
        <th>Количество</th>
        <th>Дата</th>
        <th>Статус</th>
        <th>№ Заказа</th>
      </tr>
    </thead>
    <tbody id="products-table-body">
      <!-- Здесь будут добавляться строки с продуктами -->

    </tbody>
  </table>
</div>
  
  <!-- ТАБЛИЦА ЗАЯВОК-->
  <div id="requests-table-container">
  <table class="table-request">
    <thead>
      <tr class="head-string filter-row">
        <th >Номер заявки
          <i class="toggle-filter-button fa fa-filter"></i>
          <div class="filter-dropdown">
            <input type="number"  data-filter="0" min="0" size="6" placeholder="Фильтр">
          </div>
        </th>
        <th>
          Статус доставки 
        </th>
        <th>
          Кол-во ТМЦ
        </th>
        <!-- <th>Ссылка на заявку
          <i class="toggle-filter-button fa fa-filter"></i>
          <div class="filter-dropdown">
          <input type="text"  data-filter="1" placeholder="Фильтр">
          </div>
        </th> -->
        <th>Дата заявки
          <i class="toggle-filter-button fa fa-filter"></i>
          <div class="filter-dropdown">
          <input type="text"  data-filter="2" placeholder="Фильтр">
          </div>
        </th>
        <th id="initiator-filter">Инициатор
          <i class="toggle-filter-button fa fa-filter"></i>
          <div class="filter-dropdown">
          <input type="text"  data-filter="3" placeholder="Фильтр">
        </div>
      </th>
        <th>Исполнитель
          <i class="toggle-filter-button fa fa-filter"></i>
          <div class="filter-dropdown">
          <input type="text"  data-filter="4" placeholder="Фильтр">
          </div>
        </th>
   
        <th>Статус
          <i class="toggle-filter-button fa fa-filter"></i>
          <div class="filter-dropdown" data-filter="5">
          <select id="status">
          <option value="">Все</option>
          <option value="Новая">Новая</option>
          <option value="В работе">В работе</option>
          <option value="Выполнена">Выполнена</option>
        </select>
          </div>
        </th>
        <th>Файл прикреплен</th>
        <th>Дата выполнения
          <i class="toggle-filter-button fa fa-filter"></i>
          <div class="filter-dropdown">
          <input type="text" data-filter="6" placeholder="Фильтр">
          </div>
        </th>
        <th><button id="download-button">
          <!-- <i class="fas fa-download"></i> -->
          Скачать заявки</button></th>
        <th><button id="add-btn">Добавить заявку</button></th>
        </th>
      </tr>
    </thead>
    <tbody id="table-body"></tbody>
  </table>
  <div id="pagination-controls">
    <button id="prev-page" class="page-button">
      <i class="fas fa-chevron-left"></i>
    </button>
    <div id="page-numbers">
      <!-- Здесь будут размещаться кнопки с номерами страниц -->
    </div>
    <button id="next-page" class="page-button">
      <i class="fas fa-chevron-right"></i>
    </button>
  </div>
</div>
      <!-- Добавим кнопку "переноса вверх страницы" -->
      <button id="scroll-to-top" title="Перейти вверх">
        <i class="fas fa-arrow-up"></i>
      </button>
</div>
<!-- МОДАЛЬНОЕ ОКНО ДЛЯ ПРОСМОТРА ЗАЯВКИ -->
<div id="modal" class="hidden">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Заявка<br>
      № <span id="request-number"></span></h3>
      <form id="form" action="" method="">
        <div class="field-container">
        <input class="text-field-input" type="text" id="initiator" value="" placeholder="ФИО" onblur="capitalizeWords(this)">
        <label class="text-field-label" for="initiator">Инициатор</label>
      </div>
      <div class="field-container">
        <input type="text" id="executive-id" list="executive-list"   placeholder="ФИО" onblur="capitalizeWords(this)" autocomplete="off" class="text-field-input">
<datalist id="executive-list">
  <!-- Здесь будут опции для списка исполнителей -->
</datalist>
        <label class="text-field-label" for="executive-id">Исполнитель</label>
      </div>
      <div class="field-container status-block">
        <label class="text-field-label" for="status-request">Статус</label>
        <select id="status-request" class="text-field-input">
        <option value="Новая" selected>Новая</option>
        <option value="В работе">В работе</option>
        <option value="Выполнена">Выполнена</option>
      </select>
    </div>
  </form> 
      <span class="close">&times;</span>
    </div>
    <form id="request-form" action="" method="">
      <div class="field-container">
        <label class="text-field-label" for="category-list">Категория</label>
        <select class="text-field-input" id="category-list" name="category" required>
          <option value="" disabled selected>Выберите категорию</option>
          <option value="Осн. материалы">Осн. материалы</option>
          <option value="Запасные части">Запасные части</option>
          <option value="Инвентарь">Инвентарь</option>
          <option value="Образцы">Образцы</option>
          <option value="Хозматериалы">Хозматериалы</option>
          <option value="Стройматериалы">Стройматериал</option>
          <option value="Спецодежда">Спецодежда</option>
          <option value="Услуги">Услуги</option>
        </select>
      </div>
        <div class="field-container">
          <input class="" type="number" id="input-code" name="code" disabled>
          <input class="text-field-input" type="text" id="name" autocomplete="off" placeholder="например: Саморез по дереву 4,2х76 мм" onblur="capitalizeWords(this)" required>
          <label class="text-field-label" for="variation">Наименование</label>
          <div id="autocompleteList"></div>
        </div>
        <div class="field-container">
          <input class="text-field-input" type="text" id="variation" autocomplete="off" placeholder="осн." value="осн." required disabled>
          <label class="text-field-label" for="variation">Вариант исполнения</label>
        </div>
        <!-- -->
        <div class="field-container">
          <label class="text-field-label" for="type">Баз.ед</label>
        <select class="text-field-input" id="type" required>
          <option value="м">м</option>
          <option value="шт" selected>шт</option>
          <option value="кв.м">кв.м</option>
          <option value="кг">кг</option>
          <option value="л">л</option>
          <option value="лист">лист</option>
          <option value="пог.м">пог.м</option>
          <option value="т">т</option>
        </select>
      </div>
      <div class="field-container">
          <input class="text-field-input" type="text" id="equipment" list="equipment-list" placeholder="Станок сверлильный INFISMAC" autocomplete="off" onblur="capitalizeWords(this)" required>
          <label class="text-field-label" for="equipment">Оборудование</label>
          <div id="equipment-list"></div>
        </div>
        <div class="field-container">
          <input class="text-field-input" type="number" id="input-count" name="count" min="0" placeholder="0" required>
          <label class="text-field-label" for="input-count" >Кол-во</label>
        </div>
        <div class="field-container">      
        <input class="text-field-input" type="text" id="input-link" name="input-link">
        <label  class="text-field-label" for="input-link">Ссылка на товар:</label>
      </div>
        
        <button type="submit" id="add-product-btn">Добавить ТМЦ</button>
    </form>
    <div class="modal-main">
      <table id="products-table" class="nomenklature">
        <thead>
          <tr class="head-string filter-row">
            <th>#</th>
            <th>Категория</th>
            <th>Наименование
              <i class="toggle-filter-button fa fa-filter"></i>
              <div class="filter-dropdown">
              <input type="text"  data-filter="0" placeholder="Фильтр">
              </div>
            </th>
            <th>Вариант исполнения</th>
            <th>Баз ед</th>
            <th>Оборудование</th>
            <th>Поставщик</th>
            <th>Код
              <i class="toggle-filter-button fa fa-filter"></i>
          <div class="filter-dropdown">
            <input type="number"  data-filter="1" min="0" size="6" placeholder="Фильтр">
          </div></th>
            <th>Комментарий</th>
            <th>Ссылка</th>
            <th>№ Заказа</th>
            <th>Статус</th>
            <th>Дата</th>
            <th>Кол-во</th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody id="products-body">
          <input type="checkbox" name="editList" id="edit-list">
        </tbody>
      </table>
    </div>
    <div class="modal-footer">
      <input type="file" id="fileInput" style="display: none;">
      <button id="downloadfile" style="display: none;">Скачать файл</button>
        <input type="submit" id="save-request-btn" value="Отправить заявку" class="hidden">
      <input type="submit" id="save-change-btn" value="Перезаписать заявку" class="hidden">
      <div class="download-footer-buttons">
        <button id="download-products-button">
          Скачать Excel<i class="fas fa-file-excel"></i> 
      </button>  
      <button id="download-word-button">
        Скачать Word<i class="fas fa-file-word"></i>
      </button>
      </div> 
    </div>
    <script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js"></script>
  <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.js"></script>
  <script src="main.js"></script>
</body>
</html>
